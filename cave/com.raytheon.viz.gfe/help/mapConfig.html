<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
  <meta content="text/html; charset=iso-8859-1"
 http-equiv="Content-Type">
  <meta
 content="Mozilla/4.79 [en] (X11; U; Linux 2.4.18-27.7.xsmp i686) [Netscape]"
 name="GENERATOR">
  <meta content="" name="Author">
  <title>Map Background Configuration</title>
</head>
<body bgcolor="#ffffff">
<center>
<h1 class="3Heading"><a name="maps.py"></a>Map Background Configuration</h1>
</center>
<center>April 2, 2012<br>
</center>
<h2><a name="Organization"></a><b>Organization</b></h2>
<a href="#Maps.pyFormat">Format</a>
<blockquote><a href="#SiteInformation">Site Information</a> <br>
  <a href="#ShapefileNames">Shapefile Names</a> <br>
  <a href="#MapDefinitions">Map Definitions</a> <br>
</blockquote>
<a href="#AWIPSstandardnames">AWIPS standard names</a>
<br>
<a href="#ShapefileDescription">Shapefile Description</a>
<blockquote><a href="#Filenames">Filenames</a> <br>
  <a href="#CatalogEntryDescription">Catalog Entry Description</a> <br>
  <a href="#Attributes">Attributes</a></blockquote>
<hr width="100%">
<h2><a name="Overview"></a>Overview</h2>
The Maps.java file defines the attributes of each map. The server
when
started looks through the list of maps as defined in the Maps.java file
and
generates maps. These maps may be retrieved through the server
protocol.
The map data available through the protocol includes polygons, points,
and arcs. The information contains the geographical data and the
set of attributes that define the shape.
<p>The map generation software uses shapefiles as the input.
These
shapefiles are filtered by domain (based on the site) and
attributes.
There are different attributes available for each shapefile.
Refer
to the AWIPS Map Background
Database provided by the National Weather Service for details on the
available shapefiles and the attributes contained within each
shapefile.
This information will be needed in order to tailor a map to your site.
</p>
<p>The Maps.java file also is used to define and automatically generate
edit
areas based on the shapefile polygons. The user can select which
polygons will be converted into edit areas and which edit area groups
they
will be assigned.
</p>
<p><b><font color="#ff0000">In AWIPS1 you could override changes in Maps.py, using the <a
 href="localMapsConfig.html">localMaps.py</a>
technique. In AWIPS2, this is slated for implementation under DR9441. To override 
the default map filenames, i.e., source filenames
for the shapefiles, use step 3 of the <a href="MapFiles.html">Map Files</a> method instead of the
AWIPS1 <a href="localMapFiles.html">localMapFiles.py</a> method.</font></b>
</p>
<p><b><font color="#ff0000">To update shapefiles, refer to the <a href="MapFiles.html">MapFiles</a>
documentation, specifically the section on <a href="MapFiles.html#Updating">Updating Shapefiles</a>.
</font></b></p>
Software releases after Jan 1, 2006 separate the map shapefile from the
CORE GFE. In some applications, such as AWIPS, the map
shapefile configuration becomes the responsibility of the site since
the map shapefiles will no longer be shipped with the GFE
software. A separate install is available for non-AWIPS
purposes and is posted with the software releases. If the
associated Map Shapefile install is not installed at your site, then
sites will be responsible for:<br>
<ul>
  <li>creating the maps bundles that contain the map filenames for the baselined maps.<br>
  </li>
  <li>Downloading updated shapefiles from either GSD or from the NOAA1 web server.<br>
  </li>
</ul>
<p></p>
<hr width="100%">
<h2><a name="Maps.pyFormat"></a><b>Format</b></h2>
<h3>
<a name="SiteInformation"></a><b>Site Information</b></h3>
EDEX reads in the site identifier, map directory, and the <a
 href="serverConfig.html#GridDomainConfiguration">site's
specific grid domains</a>. Several variables are computed:
<ul>
  <li>CWA - site identifier</li>
  <li>MAPDIR - location for the shapefile used as input to the map
generation
routines</li>
</ul>
<h3><a name="ShapefileNames"></a>Shapefile Names</h3>
The names of the shapefiles are referenced in the <a href="MapFiles.html">maps database</a>.
<h3><a name="MapDefinitions"></a><b>Map Definitions</b></h3>
The map definition section defines each map that is desired.
<h2>
<hr width="100%"><a name="AWIPSstandardnames"></a>AWIPS standard names</h2>
The AWIPS standard names table shows a sample filename, as loaded from
the NWS map database, and the attribute fields. The user must download
the files from the NWS map databases, unzip it, and either copy the
resulting
uncompressed files, or gzip -9 them to save space, to the appropriate
directory.
This list is an example, refer to the NWSH Map GIS page for complete
up-to-date
information. The link to the NWS Map GIS page is <a
 href="http://www.awips.noaa.gov/mapdata/newcat/">http://awips.nws.noaa.gov/mapdata/newcat/</a>
<table nosave="" border="1" width="100%">
  <tbody>
    <tr>
      <td>Shapefile Contents</td>
      <td>Example File Name (without extensions)</td>
      <td>Attributes</td>
    </tr>
    <tr>
      <td>Cities</td>
      <td>web_city</td>
      <td>LAND_WATER, ST_FIPS, COUNTY_FIP, PL_FIPS, NAME, LON, LAT,
POP_1990,
ST, WATCH_WARN, PROG_DISC</td>
    </tr>
    <tr>
      <td>Counties</td>
      <td>c_19nv01</td>
      <td>STATE, CWA, COUNTYNAME, FIPS, TIME_ZONE, FE_AREA, LON, LAT</td>
    </tr>
    <tr>
      <td>County Warning Areas</td>
      <td>w_30nv01</td>
      <td>WFO, CWA, LON, LAT</td>
    </tr>
    <tr>
      <td>Coastal and Offshore Marine Zones</td>
      <td>mz15ja02</td>
      <td>ID, WFO, NAME, LON, LAT, WFO_AREA</td>
    </tr>
    <tr>
      <td>High Seas Marine Zones</td>
      <td>hz02oc01</td>
      <td>WFO, LON, LAT, HEADING</td>
    </tr>
    <tr>
      <td>Interstates</td>
      <td>roads</td>
      <td>LENGTH, TYPE, ADMN_CLASS, TOLL_RD, RTE_NUM1, RTE_NUM2, ROUTE</td>
    </tr>
    <tr>
      <td>Lakes</td>
      <td>lk17de98</td>
      <td>NAME, FEATURE, LON, LAT</td>
    </tr>
    <tr>
      <td>NWS River Forecast Basins</td>
      <td>ba18oc01</td>
      <td>ID, NAME, CWA, RFC, LON, LAT</td>
    </tr>
    <tr>
      <td>Public Forecast Zones</td>
      <td>z_14ja02</td>
      <td>STATE, ZONE, CWA, NAME, STATE_ZONE, TIME_ZONE, FE_AREA, LON,
LAT</td>
    </tr>
    <tr>
      <td>River Forecast Center Regions</td>
      <td>rf19fe99</td>
      <td>SITE_ID, STATE, RFC_NAME, RFC_CITY, BASIN_ID</td>
    </tr>
    <tr>
      <td>States and Territories</td>
      <td>s_24ja01</td>
      <td>STATE, NAME, FIPS, LON, LAT</td>
    </tr>
    <tr>
      <td>Canadian Provinces</td>
      <td>province</td>
      <td>CODE, NAME</td>
    </tr>
    <tr>
      <td>Mexican States</td>
      <td>mx_state</td>
      <td>CODE, NAME</td>
    </tr>
    <tr>
      <td>Fire Weather Zones</td>
      <td>fz28my02</td>
      <td>STATE, ZONE, STATE_ZONE, NAME, TIME_ZONE, FE_AREA, LAT, LON</td>
    </tr>
    <tr>
      <td>ISC Combined Public and Marine Areas</td>
      <td>cm15au02</td>
      <td>WFO, LON, LAT</td>
    </tr>
    <tr>
      <td style="vertical-align: top;">Fire Weather Area of
Responsibility<br>
      </td>
      <td style="vertical-align: top;">cf26ap04<br>
      </td>
      <td style="vertical-align: top;">CWA<br>
      </td>
    </tr>
  </tbody>
</table>
<p>The Example File Name is the name of the file matching the name in
the
AWIPS Map Catalog <a href="http://www.awips.noaa.gov/mapdata/newcat">AWIPS
Map Background Database</a>.&nbsp; Several of these files are tagged
with
a date, therefore their name will change when updated.
</p>
<p></p>
<hr width="100%">
<h2><a name="ShapefileDescription"></a>Shapefile description</h2>
<h3>
<a name="Filenames"></a>Filenames</h3>
Shapefiles provide a complete non-topological description of
2-dimensional
geometric shapes, in three files:
<p>filename.shp - shape description
<br>
filename.shx - index (shape to attributes)
<br>
filename.dbf - attributes
</p>
<p>&nbsp;The shape of each geometric (spatial) object is either a
point,
line, or polygon, and is described completely and in sequential order
by
the file *.shp. Attributes for each shape are stored sequentially in
the
same order by the file *.dbf, using the dBASE III+ Database File
Structure.
An index of shapes to attributes is maintained in the *.shx file. The
Shapefile
format is documented on-line at <a href="http://www.esri.com">http://www.esri.com</a>.
By convention, a Shapefile is associated by one prefix filename. The
contents
of the *.dbf file can be changed without damaging the index
relationship
to *.shp as long as dBASE records are not added, deleted or re-ordered.
Shapefiles can be renamed, provided that all three components are given
the same filename and the extensions are not changed. We have
restricted
the filenames to 8 characters for compatibility with DOS systems.
</p>
<p>&nbsp;Each catalog entry provides an image of the Shapefile. When
the
geographic area is not obvious, the Shapefile is shown as darker points
or lines on a lighter background. Space is conserved using the "zip"
compression
technique. Public domain software to extract *.zip files are now
available
for most operating systems and hardware environments from <a
 href="ftp://ftp.uu.net/pub/archiving/zip/">ftp://ftp.uu.net/pub/archiving/zip/</a>.
for NWS users. Make sure that the *.zip file has been downloaded using
a binary transfer method. Previous archives in the *.tar.Z (UNIX) and
self-extracting
*.exe (DOS) formats have been deleted.
</p>
<p>filename.zip - compressed (zip)
<br>
filename.gif - Graphics Interchange Format
<br>
filename.txt - flat text listing of filename.dbf
<br>
&nbsp;
</p>
<h3><a name="CatalogEntryDescription"></a>Catalog Entry Description</h3>
Naming Convention - a description of the name of the Shapefile. Most
data
in the catalog have a two letter prefix for the type of data and the
date
in ddmmyy format.
<br>
Location - directory in Catalog (URL)
<br>
Shapefile Type - type of shape {point, polyline, polygon}
<br>
Source - origin of shape and attribute information
<br>
Last Modified - last date shapes or attributes modified
<br>
File size information: - size of all relavant files in bytes and the
number of records in the Dbase file (.dbf)for shapefiles or number of
features
in a text file.
<br>
&nbsp;
<h3><a name="Attributes"></a>Attributes</h3>
field - dBASE field name (1 to 10 characters)
<br>
type - field type {character, numeric, logical, date}
<br>
width,dec - field type specifications:
<br>
{character: width = # characters} {logical: width = 1} {date: width
= 8}
<br>
{numeric: width = # digits, dec = # decimal places}
<br>
Description - brief statement of field usage.
<br>
<hr width="100%">
<div class="Body"><a href="#Overview">Back To Top</a>
<br>
<a href="GFESuite.html#TableOfContents">Back To TOC</a></div>
</body>
</html>
