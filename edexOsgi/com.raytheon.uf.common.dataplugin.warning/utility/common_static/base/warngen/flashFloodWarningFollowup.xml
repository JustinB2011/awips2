<!-- Flash Flood Statement County-based configuration -->
<!-- Created by Mike Dangelo  09-19-2011 at Alaska TIM 
     Modified by Phil Kurimski 09-23-2011 for burn scars and mud slides 
     Modified by EVAN BOOKBINDER WFO EAX 11-4-2011 removed bulletDefaults that prevented auto selection
     Modified by Mike Dangelo     01-25-2012 at CRH TIM
     Modified by Mike Dangelo     02-23-2012
     Modified by Phil Kurimski    03-02-2012 OB12.2.1-4
     Modified by Qinglu Lin       04-04-2012 DR 14691. Added <feAreaField> tag.
     Modified by Evan Bookbinder  09-11-2012 Added settings for locations shapefile
                                            Added new areaSource object
     Modified by Evan Bookbinder  01-07-2013 LockedGroupsOnFollowup tag
     Modified by Phil Kurimski    02-05-2013 revised CTA selections
-->

<warngenConfig>

 <!-- Config distance/speed units -->
 <unitDistance>mi</unitDistance>
 <unitSpeed>mph</unitSpeed>

 <!-- Maps to load on template selection. Refer to 'Maps' menu in CAVE. 
 	The various menu items are also the different maps
 	that can be loaded with each template. -->
 <maps>
  <map>County Names</map>
  <map>County Warning Areas</map>
  <!-- 	<map>FFMP Small Stream Basin Links</map> -->
  <!-- 	<map>Major Rivers</map> --> 
 </maps>

 <!-- Followups: VTEC actions of allowable followups when this template is selected 
	Each followup will become available when the appropriate time range permits.
 -->
 <followups>
  <followup>COR</followup>
  <followup>CON</followup>
  <followup>CAN</followup>
  <followup>EXP</followup>
 </followups>
 
 <!-- Phensigs: The list of phenomena and significance combinations that this template applies to -->
 <phensigs>
   <phensig>FF.W</phensig>
 </phensigs>
 
  <!-- Enables/disables user from selecting the Restart button the GUI -->
 <enableRestart>false</enableRestart>
 
   <!-- Enable/disables the system to lock text based on various patterns -->
 <autoLockText>true</autoLockText>
 
 <!-- durations: the list of possible durations of the warning -->
  <!-- THE DURATIONS REALLY SERVE NO PURPOSE IN A FOLLOWUP BUT WILL CRASH WARNGEN IF REMVOED -->
 <defaultDuration>30</defaultDuration>
 <durations>
  <duration>30</duration>
 </durations>

<lockedGroupsOnFollowup>ic</lockedGroupsOnFollowup> 
<bulletActionGroups>
<bulletActionGroup>
 <bullets>
  <bullet bulletText="*********** SELECT A FOLLOWUP **********" bulletType="title"/>
 </bullets>
</bulletActionGroup>
<bulletActionGroup action="CAN" phen="FF" sig="W">
 <bullets>
  <bullet bulletName="recedingWater" bulletText="Water is receding" />
  <bullet bulletName="rainEnded" bulletText="Heavy rain ended" />
 </bullets>
</bulletActionGroup>
<bulletActionGroup action="EXP" phen="FF" sig="W">
 <bullets>
  <bullet bulletName="recedingWater" bulletText="Water is receding" />
  <bullet bulletName="rainEnded" bulletText="Heavy rain ended" />
 </bullets>
</bulletActionGroup>
<bulletActionGroup action="CON" phen="FF" sig="W">
 <bullets>
  <bullet bulletName="ffwEmergency" bulletText="**SELECT FOR FLASH FLOOD EMERGENCY**" parseString="FLASH FLOOD EMERGENCY"/>
  <bullet bulletName="icrs" bulletText="Also snow melt" parseString=".RS." showString=".RS."/>
  <bullet bulletText="*********** SOURCE (CHOOSE 1) **********" bulletType="title"/>
  <bullet bulletName="doppler" bulletText="Doppler radar indicated" bulletGroup="source" parseString="DOPPLER RADAR INDICATED"/>
  <bullet bulletName="dopplerGauge" bulletText="Doppler radar and automated gauges" bulletGroup="source" parseString="DOPPLER RADAR AND AUTOMATED RAIN GAUGES"/>
  <bullet bulletName="trainedSpotters" bulletText="Trained spotters reported" bulletGroup="source" parseString="TRAINED WEATHER SPOTTERS REPORTED"/>
  <bullet bulletName="public" bulletText="Public reported" bulletGroup="source" parseString="THE PUBLIC REPORTED"/>
  <bullet bulletName="lawEnforcement" bulletText="Local law enforcement reported" bulletGroup="source" parseString="LOCAL LAW ENFORCEMENT REPORTED"/>
  <bullet bulletName="emergencyManagement" bulletText="Emergency management reported" bulletGroup="source" parseString="EMERGENCY MANAGEMENT REPORTED"/>
  <!-- The following bullets will add satellite and gauges as a source. If you would like to use this
     in your template uncomment the next few lines. -->  
<!-- <bullet bulletName="satellite" bulletText="satellite estimates" bulletGroup="source" parseString="SATELLITE ESTIMATES"/>
  <bullet bulletName="satelliteGauge" bulletText="satellite estimates and automated gauges" bulletGroup="source" parseString="SATELLITE AND "/> -->
  <bullet bulletText="*********** EVENT (CHOOSE 1) **********" bulletType="title"/>
  <bullet bulletName="thunder" bulletText="Thunderstorm(s)" bulletGroup="event" parseString="THUNDERSTORM"/>
  <bullet bulletName="plainRain" bulletText="Due to only heavy rain" bulletGroup="event" parseString="&quot;HEAVY RAIN&quot;,&quot;-THUNDERSTORM&quot;"/>
  <bullet bulletName="flash" bulletText="Flash flooding occurring" bulletGroup="event" parseString="FLASH FLOODING IS ALREADY OCCURRING."/>
  <bullet bulletText="*********** (OPTIONAL) DEBRIS FLOW INFO **********" bulletType="title"/>
  <bullet bulletName="burnScar" bulletText="Burn scar area with debris flow" bulletGroup="addevent" parseString="BURN SCAR"/>
  <bullet bulletName="mudSlide" bulletText="Mud Slides" bulletGroup="addevent" parseString="MUD SLIDE"/>
  <bullet bulletText="*********** RAIN SO FAR (OPTIONAL) **********" bulletType="title"/>
  <bullet bulletName="rain1" bulletText="One inch so far" bulletGroup="rainAmt" parseString="ONE INCH OF RAIN HAS ALREADY FALLEN"/>
  <bullet bulletName="rain2" bulletText="Two inches so far" bulletGroup="rainAmt" parseString="TWO INCHES OF RAIN HAVE ALREADY FALLEN"/>
  <bullet bulletName="rain3" bulletText="Three inches so far" bulletGroup="rainAmt" parseString="THREE INCHES OF RAIN HAVE ALREADY FALLEN"/>
  <bullet bulletName="rainEdit" bulletText="User defined amount" bulletGroup="rainAmt" parseString="INCHES OF RAIN HAVE FALLEN"/>
  <bullet bulletText="*********** ADDITIONAL INFO ***********" bulletType="title"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="LOCATIONS IMPACTED INCLUDE" showString="LOCATIONS IMPACTED INCLUDE"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="LOCATIONS THAT WILL EXPERIENCE FLOODING INCLUDE" showString="LOCATIONS THAT WILL EXPERIENCE FLOODING INCLUDE"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="LOCATIONS IN THE WARNING INCLUDE" showString="LOCATIONS IN THE WARNING INCLUDE"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="WILL REMAIN OVER" showString="WILL REMAIN OVER"/>  
  <bullet bulletName="addRainfall" bulletText="Additional rainfall of XX inches expected" parseString="ADDITIONAL RAINFALL"/>
  <bullet bulletName="particularStream" bulletText="Flooding is occurring in a particular stream/river" parseString="FLOOD WATERS ARE MOVING DOWN"/>
  <bullet bulletName="drainages" bulletText="Automated list of drainages" parseString="THIS INCLUDES THE FOLLOWING STREAMS AND DRAINAGES" loadMap="River Drainage Basins"/>
  <bullet bulletText="**** CALL TO ACTIONS (CHOOSE 1 OR MORE) ****" bulletType="title"/>
<!-- end all call to action bullets with "CTA" ex: "obviousNameCTA" -->
  <bullet bulletName="ffwEmergencyCTA" bulletText="**FLASH FLOOD EMERGENCY CTA**" parseString="FLASH FLOOD EMERGENCY"/>
  <bullet bulletName="actQuicklyCTA" bulletText="Act Quickly..." parseString="HIGHER GROUND NOW. ACT QUICKLY TO PROTECT YOUR LIFE."/>
  <bullet bulletName="childSafetyCTA" bulletText="Child Safety..." parseString="KEEP CHILDREN AWAY FROM STORM DRAINS"/>
  <bullet bulletName="nighttimeCTA" bulletText="Nighttime flooding..." parseString="BE ESPECIALLY CAUTIOUS AT NIGHT WHEN"/>
  <bullet bulletName="safetyCTA" bulletText="Safety...by foot or motorist" parseString="DO NOT ENTER OR CROSS FLOWING WATER"/>
  <bullet bulletName="turnAroundCTA" bulletText="Turn around...dont drown" parseString="TURN AROUND...DONT DROWN"/>
  <bullet bulletName="stayAwayCTA" bulletText="Stay away or be swept away" parseString="STAY AWAY OR BE SWEPT AWAY"/>
  <bullet bulletName="arroyosCTA" bulletText="Arroyos..." parseString="ARROYOS...STREAMS AND RIVERS CAN BECOME RAGING KILLER CURRENTS"/>
  <bullet bulletName="burnAreasCTA" bulletText="Burn Areas..." parseString="MOVE AWAY FROM RECENTLY BURNED AREAS"/>
  <bullet bulletName="reportFloodingCTA" bulletText="Report flooding to local law enforcement" parseString="PLEASE REPORT FLOODING"/>
  </bullets>
</bulletActionGroup>
<bulletActionGroup action="COR" phen="FF" sig="W">
 <bullets>
  <bullet bulletText="**** CORRECTED PRODUCT. CLICK CREATE TEXT ****" bulletType="title"/>
  <bullet bulletName="ffwEmergency" bulletText="**SELECT FOR FLASH FLOOD EMERGENCY**" parseString="FLASH FLOOD EMERGENCY"/>
  <bullet bulletName="icrs" bulletText="Also snow melt" parseString=".RS." showString=".RS."/>
  <bullet bulletText="*********** SOURCE (CHOOSE 1) **********" bulletType="title"/>
  <bullet bulletName="doppler" bulletText="Doppler radar indicated" bulletGroup="source" parseString="DOPPLER RADAR INDICATED"/>
  <bullet bulletName="dopplerGauge" bulletText="Doppler radar and automated gauges" bulletGroup="source" parseString="DOPPLER RADAR AND AUTOMATED RAIN GAUGES"/>
  <bullet bulletName="trainedSpotters" bulletText="Trained spotters reported" bulletGroup="source" parseString="TRAINED WEATHER SPOTTERS REPORTED"/>
  <bullet bulletName="public" bulletText="Public reported" bulletGroup="source" parseString="THE PUBLIC REPORTED"/>
  <bullet bulletName="lawEnforcement" bulletText="Local law enforcement reported" bulletGroup="source" parseString="LOCAL LAW ENFORCEMENT REPORTED"/>
  <bullet bulletName="emergencyManagement" bulletText="Emergency management reported" bulletGroup="source" parseString="EMERGENCY MANAGEMENT REPORTED"/>
  <!-- The following bullets will add satellite and gauges as a source. If you would like to use this
     in your template uncomment the next few lines. -->  
<!-- <bullet bulletName="satellite" bulletText="satellite estimates" bulletGroup="source" parseString="SATELLITE ESTIMATES"/>
  <bullet bulletName="satelliteGauge" bulletText="satellite estimates and automated gauges" bulletGroup="source" parseString="SATELLITE AND "/> -->
  <bullet bulletText="*********** EVENT (CHOOSE 1) **********" bulletType="title"/>
  <bullet bulletName="thunder" bulletText="Thunderstorm(s)" bulletGroup="event" parseString="THUNDERSTORM"/>
  <bullet bulletName="plainRain" bulletText="Due to only heavy rain" bulletGroup="event" parseString="&quot;HEAVY RAIN&quot;,&quot;-THUNDERSTORM&quot;"/>
  <bullet bulletName="flash" bulletText="Flash flooding occurring" bulletGroup="event" parseString="FLASH FLOODING IS ALREADY OCCURRING."/>
  <bullet bulletText="*********** (OPTIONAL) DEBRIS FLOW INFO **********" bulletType="title"/>
  <bullet bulletName="burnScar" bulletText="Burn scar area with debris flow" bulletGroup="addevent" parseString="BURN SCAR"/>
  <bullet bulletName="mudSlide" bulletText="Mud Slides" bulletGroup="addevent" parseString="MUD SLIDE"/>
  <bullet bulletText="*********** RAIN SO FAR (OPTIONAL) **********" bulletType="title"/>
  <bullet bulletName="rain1" bulletText="One inch so far" bulletGroup="rainAmt" parseString="ONE INCH OF RAIN HAS ALREADY FALLEN"/>
  <bullet bulletName="rain2" bulletText="Two inches so far" bulletGroup="rainAmt" parseString="TWO INCHES OF RAIN HAVE ALREADY FALLEN"/>
  <bullet bulletName="rain3" bulletText="Three inches so far" bulletGroup="rainAmt" parseString="THREE INCHES OF RAIN HAVE ALREADY FALLEN"/>
  <bullet bulletName="rainEdit" bulletText="User defined amount" bulletGroup="rainAmt" parseString="INCHES OF RAIN HAVE FALLEN"/>
  <bullet bulletText="*********** ADDITIONAL INFO ***********" bulletType="title"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="LOCATIONS IMPACTED INCLUDE" showString="LOCATIONS IMPACTED INCLUDE"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="LOCATIONS THAT WILL EXPERIENCE FLOODING INCLUDE" showString="LOCATIONS THAT WILL EXPERIENCE FLOODING INCLUDE"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="LOCATIONS IN THE WARNING INCLUDE" showString="LOCATIONS IN THE WARNING INCLUDE"/>
  <bullet bulletName="listofcities" bulletText="Select for a list of cities" bulletGroup="pcast" parseString="WILL REMAIN OVER" showString="WILL REMAIN OVER"/>
  <bullet bulletName="addRainfall" bulletText="Additional rainfall of XX inches expected" parseString="ADDITIONAL RAINFALL"/>
  <bullet bulletName="particularStream" bulletText="Flooding is occurring in a particular stream/river" parseString="FLOOD WATERS ARE MOVING DOWN"/>
  <bullet bulletName="drainages" bulletText="Automated list of drainages" parseString="THIS INCLUDES THE FOLLOWING STREAMS AND DRAINAGES" loadMap="River Drainage Basins"/>
  <bullet bulletText="**** CALL TO ACTIONS (CHOOSE 1 OR MORE) ****" bulletType="title"/>
<!-- end all call to action bullets with "CTA" ex: "obviousNameCTA" -->
  <bullet bulletName="ffwEmergencyCTA" bulletText="**FLASH FLOOD EMERGENCY CTA**" parseString="FLASH FLOOD EMERGENCY"/>
  <bullet bulletName="actQuicklyCTA" bulletText="Act Quickly..." parseString="HIGHER GROUND NOW. ACT QUICKLY TO PROTECT YOUR LIFE."/>
  <bullet bulletName="childSafetyCTA" bulletText="Child Safety..." parseString="KEEP CHILDREN AWAY FROM STORM DRAINS"/>
  <bullet bulletName="nighttimeCTA" bulletText="Nighttime flooding..." parseString="BE ESPECIALLY CAUTIOUS AT NIGHT WHEN"/>
  <bullet bulletName="safetyCTA" bulletText="Safety...by foot or motorist" parseString="DO NOT ENTER OR CROSS FLOWING WATER"/>
  <bullet bulletName="turnAroundCTA" bulletText="Turn around...dont drown" parseString="TURN AROUND...DONT DROWN"/>
  <bullet bulletName="stayAwayCTA" bulletText="Stay away or be swept away" parseString="STAY AWAY OR BE SWEPT AWAY"/>
  <bullet bulletName="arroyosCTA" bulletText="Arroyos..." parseString="ARROYOS...STREAMS AND RIVERS CAN BECOME RAGING KILLER CURRENTS"/>
  <bullet bulletName="burnAreasCTA" bulletText="Burn Areas..." parseString="MOVE AWAY FROM RECENTLY BURNED AREAS"/>
  <bullet bulletName="reportFloodingCTA" bulletText="Report flooding to local law enforcement" parseString="PLEASE REPORT FLOODING"/>
 </bullets>
</bulletActionGroup>
</bulletActionGroups>

 <trackEnabled>false</trackEnabled>
 
 <!-- areaSource object to generate county-based information -->
 <areaSource variable="areas">
   <areaSource>County</areaSource>
   <inclusionPercent>0</inclusionPercent>
   <inclusionAndOr>AND</inclusionAndOr>
   <inclusionArea>0</inclusionArea>
   <areaField>COUNTYNAME</areaField>
   <parentAreaField>NAME</parentAreaField>
   <areaNotationField>STATE</areaNotationField>
   <feAreaField>FE_AREA</feAreaField>
   <timeZoneField>TIME_ZONE</timeZoneField>
   <areaNotationTranslationFile>countyTypes.txt</areaNotationTranslationFile>
   <fipsField>FIPS</fipsField>
   <pointField>NAME</pointField>
   <sortBy>
  	<sort>parent</sort>
   </sortBy>
   <pointFilter>
 		<mapping key="WARNGENLEV">
 			<constraint constraintValue="1" constraintType="EQUALS" />
 		</mapping>
  </pointFilter>
  <includedWatchAreaBuffer>25</includedWatchAreaBuffer>
</areaSource>

 <!-- Required, but unused by this template -->
 <pathcastConfig>
  <withinPolygon>true</withinPolygon>
  <distanceThreshold>8.0</distanceThreshold>
  <interval>5</interval>
  <delta>5</delta>
  <maxResults>4</maxResults>
  <maxGroup>8</maxGroup>
  <pointField>Name</pointField>
  <type>AREA</type>
  <areaField>COUNTYNAME</areaField> 
<!--  <areaField>NAME</areaField> -->
  <parentAreaField>STATE</parentAreaField>
  <areaNotationField>STATE</areaNotationField>
  <areaNotationTranslationFile>countyTypes.txt</areaNotationTranslationFile>
  <sortBy>
  	<sort>distance</sort>
  </sortBy>
  <filter>
 	<mapping key="WARNGENLEV">
 		<constraint constraintValue="1,2" constraintType="IN" />
 	</mapping>
  	  <mapping key="LANDWATER">
 		<constraint constraintValue="L,LW,LC" constraintType="IN" />
 	  </mapping> 	 
  </filter>
 </pathcastConfig>

  <pointSource variable="cityList">
 	<pointField>NAME</pointField>
 	<inclusionPercent>1</inclusionPercent>
 	<type>AREA</type>
 	<searchMethod>POINTS</searchMethod>
 	<withinPolygon>true</withinPolygon>
 	<maxResults>30</maxResults>
 	<distanceThreshold>200</distanceThreshold>
	<filter> 	
  	  <mapping key="WARNGENLEV">
 		<constraint constraintValue="1,2,3,4" constraintType="IN" />
 	  </mapping>
  	  <mapping key="LANDWATER">
 		<constraint constraintValue="L,LW,LC" constraintType="IN" />
 	  </mapping> 	 	  
 	</filter> 	 	
 	<sortBy>
  		<sort>warngenlev</sort>
  		<sort>population</sort>
  		<sort>distance</sort>
  	</sortBy>
 </pointSource>

<!-- Required, but unused by this template --> 
  <pointSource variable="otherPoints">
 	<pointField>NAME</pointField>
 	<type>AREA</type>
 	<searchMethod>POINTS</searchMethod>
 	<withinPolygon>true</withinPolygon>
 	<maxResults>10</maxResults>
 	<distanceThreshold>200</distanceThreshold>
 	<sortBy>
  		<sort>name</sort>
  	</sortBy>
	<filter>
 		<mapping key="WARNGENLEV">
 			<constraint constraintValue="3,4" constraintType="IN" />
 		</mapping>
  	  <mapping key="LANDWATER">
 		<constraint constraintValue="L,LW,LC" constraintType="IN" />
 	  </mapping> 	 	
  	</filter>
 </pointSource>

<!-- this "include file" tag will grab the Mile Marker XML pointSource tags, 
and place into this template  -->
<include file="mileMarkers.xml"/>
 
 <geospatialConfig>
  <pointSource>WarnGenLoc</pointSource>
  <areaSource>County</areaSource> 
<!-- <areaSource>Zone</areaSource> -->
  <parentAreaSource>States</parentAreaSource>
  <timezoneSource>TIMEZONES</timezoneSource>
  <timezoneField>TIME_ZONE</timezoneField>
 </geospatialConfig>
 
 <pointSource variable="riverdrainages">
 	<pointSource>ffmp_basins</pointSource>
    <geometryDecimationTolerance>0.064</geometryDecimationTolerance>
 	<pointField>streamname</pointField>
 	<filter>
 		<mapping key="cwa">
 			<constraint constraintValue="$warngenCWAFilter" constraintType="EQUALS" />
 		</mapping>
 	</filter>
 	<withinPolygon>true</withinPolygon>
 </pointSource>

</warngenConfig>
