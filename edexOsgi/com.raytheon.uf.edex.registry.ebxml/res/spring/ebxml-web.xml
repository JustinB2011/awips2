<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd   
  http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
  http://www.springframework.org/schema/tx
  http://www.springframework.org/schema/tx/spring-tx.xsd">

	<bean id="ebxmlRegistryWebServer" class="org.eclipse.jetty.server.Server"
		init-method="start" destroy-method="stop">

		<property name="threadPool">
			<bean id="ThreadPool" class="org.eclipse.jetty.util.thread.OldQueuedThreadPool">
				<property name="minThreads" value="1" />
				<property name="lowThreads" value="1" />
				<property name="maxThreads" value="10" />
			</bean>
		</property>

		<property name="connectors">
			<list>
				<bean id="Connector" class="org.eclipse.jetty.server.nio.SelectChannelConnector">
					<property name="port" value="${EBXML_REGISTRY_WEBSERVER_PORT}" />
					<property name="maxIdleTime" value="30000" />
					<property name="acceptors" value="2" />
					<property name="confidentialPort"
						value="${EBXML_REGISTRY_WEBSERVER_CONFIDENTIAL_PORT}" />
				</bean>
			</list>
		</property>

		<property name="handler">
			<bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerCollection">
				<property name="handlers">
					<list>
						<bean id="contexts"
							class="org.eclipse.jetty.server.handler.ContextHandlerCollection">
							<property name="handlers">
								<list>
									<bean class="org.eclipse.jetty.webapp.WebAppContext">
										<property name="contextPath" value="/registryEbxml" />
										<property name="war"
											value="file:///${edex.home}/webapps/registryEbxml" />
									</bean>
								</list>
							</property>
						</bean>
						<bean id="defaultHandler" class="org.eclipse.jetty.server.handler.DefaultHandler" />
						<bean id="requestLog" class="org.eclipse.jetty.server.handler.RequestLogHandler" />
					</list>
				</property>
			</bean>
		</property>
	</bean>

	<bean id="RegistryWebUtil" class="com.raytheon.uf.edex.registry.ebxml.web.RegistryWebUtil">
		<property name="lcm" ref="lcmServiceImpl" />
	</bean>

	<bean id="RegistryWebAdmin"
		class="com.raytheon.uf.edex.registry.ebxml.web.RegistryWebAdmin">
		<property name="partyDao" ref="partyDao" />
		<property name="classificationNodeDao" ref="classificationNodeDao" />
		<property name="organizationDao" ref="organizationDao" />
		<property name="personDao" ref="personDao" />
		<property name="roleDao" ref="roleDao" />
	</bean>
</beans>  